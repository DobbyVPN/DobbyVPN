{
    "tests": [
        {
            "description": "AmneziaWG test: simple test",
            "mode": "normal",
            "steps": [
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "InitLogger",
                    "args": {
                        "path": "vpnserver-output-0.log"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartAwg",
                    "args": {
                        "tunnel": "awg",
                        "config": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "NL"
                    }
                },
                {
                    "action": "StopAwg"
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                }
            ]
        },
        {
            "description": "AmneziaWG test: multiple turn on -s",
            "mode": "normal",
            "steps": [
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "InitLogger",
                    "args": {
                        "path": "vpnserver-output-1.log"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartAwg",
                    "args": {
                        "tunnel": "awg",
                        "config": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "NL"
                    }
                },
                {
                    "action": "StopAwg"
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartAwg",
                    "args": {
                        "tunnel": "awg",
                        "config": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "NL"
                    }
                },
                {
                    "action": "StopAwg"
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                }
            ]
        },
        {
            "description": "A simple shadowsocks connect test",
            "mode": "normal",
            "steps": [
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "InitLogger",
                    "args": {
                        "path": "vpnserver-output-2.log"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartOutline",
                    "args": {
                        "key": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "FI"
                    }
                },
                {
                    "action": "StopOutline",
                    "args": {
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                }
            ]
        },
        {
            "description": "A simple cloak connect test",
            "mode": "normal",
            "steps": [
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "InitLogger",
                    "args": {
                        "path": "vpnserver-output-3.log"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartCloak",
                    "args": {
                        "localHost": "127.0.0.1",
                        "localPort": "1984",
                        "config": "...",
                        "udp": "false"
                    }
                },
                {
                    "action": "StartOutline",
                    "args": {
                        "key": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "FI"
                    }
                },
                {
                    "action": "StopOutline",
                    "args": {
                    }
                },
                {
                    "action": "StopCloak",
                    "args": {
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                }
            ]
        },
        {
            "description": "Testing vpn switch AmneziaWG -> turn off -> Outline -> turn off",
            "mode": "normal",
            "steps": [
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "InitLogger",
                    "args": {
                        "path": "vpnserver-output-4.log"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartAwg",
                    "args": {
                        "tunnel": "awg",
                        "config": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "NL"
                    }
                },
                {
                    "action": "StopAwg"
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartOutline",
                    "args": {
                        "key": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "FI"
                    }
                },
                {
                    "action": "StopOutline",
                    "args": {
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                }
            ]
        },
        {
            "description": "Testing vpn switch Outline -> turn off -> AmneziaWG -> turn off",
            "mode": "normal",
            "steps": [
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "InitLogger",
                    "args": {
                        "path": "vpnserver-output-5.log"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartOutline",
                    "args": {
                        "key": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "FI"
                    }
                },
                {
                    "action": "StopOutline",
                    "args": {
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                },
                {
                    "action": "StartAwg",
                    "args": {
                        "tunnel": "awg",
                        "config": "..."
                    }
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip_cc": "NL"
                    }
                },
                {
                    "action": "StopAwg"
                },
                {
                    "action": "timeout",
                    "args": {
                        "seconds": "8"
                    }
                },
                {
                    "action": "assert",
                    "args": {
                        "ip": "localhost"
                    }
                }
            ]
        }
    ]
}